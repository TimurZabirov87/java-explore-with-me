DROP TABLE IF EXISTS HITS, APPS;

CREATE TABLE IF NOT EXISTS APPS
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR(64) NOT NULL,
    CONSTRAINT UQ_APP_NAME UNIQUE (NAME)
);

CREATE TABLE IF NOT EXISTS HITS
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    app_id INTEGER REFERENCES APPS(id) ON DELETE CASCADE,
    URI VARCHAR(64) NOT NULL,
    IP VARCHAR(64) NOT NULL,
    CREATED TIMESTAMP WITHOUT TIME ZONE
);

